{% extends "basepagecurr.html" %}

{% block title %} 电流测试 {% endblock %} 

{% block script %}
<script src="/medias/amcharts/amcharts.js" type="text/javascript"></script>          
<script type="text/javascript">

    var chart;
    var chartData = [{% for result in result_list %}{
        "版本": "{{result.Version}}",
        "2G网络打电话": {{result.Item1}},
        "3G网络打电话": {{result.Item2}},
        "亮屏飞行模式待机": {{result.Item3}},
        "3G网络待机": {{result.Item4}},
        "无SIM卡待机": {{result.Item5}},
        "飞行模式待机": {{result.Item6}},
        "打开WLAN不联网": {{result.Item7}},
        "打开WLAN连接2.4G网络": {{result.Item8}},
        "打开WLAN连接5G网络": {{result.Item9}},
        "打开BT不连外设": {{result.Item10}},
        "打开BT连接外设": {{result.Item11}},
        "播放本地视频": {{result.Item12}},
        "游戏(切水果)": {{result.Item13}},
        "主屏滑动": {{result.Item14}},
        "联系人滑动": {{result.Item15}},
        "浏览器滑动": {{result.Item16}},
        "打开防抖录制视频": {{result.Item17}},
        "打开防抖录制视频": {{result.Item17}},
        "关闭防抖录制视频": {{result.Item18}},
        "播放录制视频": {{result.Item19}},
        "播放音乐": {{result.Item20}},
        "录音": {{result.Item21}}
    },
    {% endfor %}
    ];


AmCharts.ready(function () {
    // SERIAL CHART
    chart = new AmCharts.AmSerialChart();
    chart.dataProvider = chartData;
    chart.categoryField = "版本";
    chart.startDuration = 0.5;
    chart.balloon.color = "#000000";

    // AXES
    // category
    var categoryAxis = chart.categoryAxis;
    categoryAxis.fillAlpha = 0;
    categoryAxis.fillColor = "#FAFAFA";
    categoryAxis.gridAlpha = 0;  //上边框为无线（0）或者为实线（1）
    categoryAxis.axisAlpha = 0;   //列线是实线还是无线
    categoryAxis.gridPosition = "start";
    categoryAxis.position = "top";

    // value
    var valueAxis = new AmCharts.ValueAxis();
    valueAxis.title = "电流测试结果";
    valueAxis.dashLength = 5;   //一条虚线上两段线的间隔。
    valueAxis.axisAlpha = 0;    //0不显示左边框，其他显示为实线
    valueAxis.minimum = "0";
    valueAxis.maximum = 200;
    valueAxis.integersOnly = true;
    valueAxis.gridCount = 10;
    valueAxis.reversed = true; // this line makes the value axis reversed
    chart.addValueAxis(valueAxis);

    // GRAPHS
    // 2G网络打电话 graph						            		
    var graph = new AmCharts.AmGraph();
    graph.title = "2G网络打电话";
    graph.valueField = "2G网络打电话";
    graph.hidden = true; // this line makes the graph initially hidden           
    graph.balloonText = "2G网络打电话的平均消耗电流为: [[value]]ma";
    graph.lineAlpha = 1;
    graph.bullet = "round";
    chart.addGraph(graph);

    // 3G网络打电话  graph
    var graph = new AmCharts.AmGraph();
    graph.title = "3G网络打电话";
    graph.valueField = "3G网络打电话";
    graph.balloonText = "3G网络打电话的平均消耗电流为: [[value]]ma";
    graph.bullet = "round";
    chart.addGraph(graph);

    // 亮屏飞行模式待机 graph
    var graph = new AmCharts.AmGraph();
    graph.title = "亮屏飞行模式待机";
    graph.valueField = "亮屏飞行模式待机";
    graph.balloonText = "亮屏飞行模式待机的平均消耗电流为: [[value]]ma";
    graph.bullet = "round";
    chart.addGraph(graph);
    
    // 3G网络待机  graph
    var graph = new AmCharts.AmGraph();
    graph.title = "3G网络待机";
    graph.valueField = "3G网络待机";
    graph.balloonText = "3G网络待机的平均消耗电流为: [[value]]ma";
    graph.bullet = "round";
    chart.addGraph(graph);
    
    // 无SIM卡待机  graph
    var graph = new AmCharts.AmGraph();
    graph.title = "无SIM卡待机";
    graph.valueField = "无SIM卡待机";
    graph.balloonText = "无SIM卡待机的平均消耗电流为: [[value]]ma";
    graph.bullet = "round";
    chart.addGraph(graph);
    
    // 飞行模式待机  graph
    var graph = new AmCharts.AmGraph();
    graph.title = "飞行模式待机";
    graph.valueField = "飞行模式待机";
    graph.balloonText = "飞行模式待机的平均消耗电流为: [[value]]ma";
    graph.bullet = "round";
    chart.addGraph(graph);
    
    // 打开WLAN不联网  graph
    var graph = new AmCharts.AmGraph();
    graph.title = "打开WLAN不联网";
    graph.valueField = "打开WLAN不联网";
    graph.balloonText = "打开WLAN不联网的平均消耗电流为: [[value]]ma";
    graph.bullet = "round";
    chart.addGraph(graph);
    
    // 打开WLAN连接2.4G网络  graph
    var graph = new AmCharts.AmGraph();
    graph.title = "打开WLAN连接2.4G网络";
    graph.valueField = "打开WLAN连接2.4G网络";
    graph.balloonText = "打开WLAN连接2.4G网络的平均消耗电流为: [[value]]ma";
    graph.bullet = "round";
    chart.addGraph(graph);
    
    // 打开WLAN连接5G网络  graph
    var graph = new AmCharts.AmGraph();
    graph.title = "打开WLAN连接5G网络";
    graph.valueField = "打开WLAN连接5G网络";
    graph.balloonText = "打开WLAN连接5G网络的平均消耗电流为: [[value]]ma";
    graph.bullet = "round";
    chart.addGraph(graph);
    
    // 打开BT不连外设  graph
    var graph = new AmCharts.AmGraph();
    graph.title = "打开BT不连外设";
    graph.valueField = "打开BT不连外设";
    graph.balloonText = "打开BT不连外设的平均消耗电流为: [[value]]ma";
    graph.bullet = "round";
    chart.addGraph(graph);
    
    // 打开BT连接外设  graph
    var graph = new AmCharts.AmGraph();
    graph.title = "打开BT连接外设";
    graph.valueField = "打开BT连接外设";
    graph.balloonText = "打开BT连接外设的平均消耗电流为: [[value]]ma";
    graph.bullet = "round";
    chart.addGraph(graph);
    
    // 播放本地视频  graph
    var graph = new AmCharts.AmGraph();
    graph.title = "播放本地视频";
    graph.valueField = "播放本地视频";
    graph.balloonText = "播放本地视频的平均消耗电流为: [[value]] *10ma";
    graph.bullet = "round";
    chart.addGraph(graph);
    
    // 游戏(切水果)  graph
    var graph = new AmCharts.AmGraph();
    graph.title = "游戏(切水果)";
    graph.valueField = "游戏(切水果)";
    graph.balloonText = "游戏(切水果)的平均消耗电流为: [[value]] *10";
    graph.bullet = "round";
    chart.addGraph(graph);
    
    // 主屏滑动  graph
    var graph = new AmCharts.AmGraph();
    graph.title = "主屏滑动";
    graph.valueField = "主屏滑动";
    graph.balloonText = "主屏滑动的平均消耗电流为: [[value]] *10";
    graph.bullet = "round";
    chart.addGraph(graph);
    
    // 联系人滑动  graph
    var graph = new AmCharts.AmGraph();
    graph.title = "联系人滑动";
    graph.valueField = "联系人滑动";
    graph.balloonText = "联系人滑动的平均消耗电流为: [[value]] *10";
    graph.bullet = "round";
    chart.addGraph(graph);
    
    // 浏览器滑动  graph
    var graph = new AmCharts.AmGraph();
    graph.title = "浏览器滑动";
    graph.valueField = "浏览器滑动";
    graph.balloonText = "浏览器滑动的平均消耗电流为: [[value]] *10";
    graph.bullet = "round";
    chart.addGraph(graph);
    
    // 打开防抖录制视频  graph
    var graph = new AmCharts.AmGraph();
    graph.title = "打开防抖录制视频";
    graph.valueField = "打开防抖录制视频";
    graph.balloonText = "打开防抖录制视频的平均消耗电流为: [[value]] *10";
    graph.bullet = "round";
    chart.addGraph(graph);
    
    // 关闭防抖录制视频  graph
    var graph = new AmCharts.AmGraph();
    graph.title = "关闭防抖录制视频";
    graph.valueField = "关闭防抖录制视频";
    graph.balloonText = "关闭防抖录制视频的平均消耗电流为: [[value]] *10";
    graph.bullet = "round";
    chart.addGraph(graph);
    
    // 播放录制视频  graph
    var graph = new AmCharts.AmGraph();
    graph.title = "播放录制视频";
    graph.valueField = "播放录制视频";
    graph.balloonText = "播放录制视频的平均消耗电流为: [[value]]ma";
    graph.bullet = "round";
    chart.addGraph(graph);
    
    // 播放音乐  graph
    var graph = new AmCharts.AmGraph();
    graph.title = "播放音乐";
    graph.valueField = "播放音乐";
    graph.balloonText = "播放音乐的平均消耗电流为: [[value]]ma";
    graph.bullet = "round";
    chart.addGraph(graph);
    
    // 录音  graph
    var graph = new AmCharts.AmGraph();
    graph.title = "录音";
    graph.valueField = "录音";
    graph.balloonText = "录音的平均消耗电流为: [[value]]ma";
    graph.bullet = "round";
    chart.addGraph(graph);

    // LEGEND
    var legend = new AmCharts.AmLegend();
    legend.markerType = "circle";
    chart.addLegend(legend);

    // WRITE
    chart.write("chartdiv");
	});
	//定义了产品的二维数组，里面的顺序跟省份的顺序是相同的。通过selectedIndex获得省份的下标值来得到相应的城市数组   
	var produ=[   
		{{mi2slist|safe}},   
		{{mi2alist|safe}}, 
		{{mi3wlist|safe}},
		{{mi3tdlist|safe}}
		]; 
	function getPro(){   
		//获得产品下拉框的对象   
		var sltproduct0=document.form1.product0; 
		var sltproduct1=document.form1.product1;   
		//获得版本下拉框的对象   
		var sltversion0=document.form1.version0;
		//获得版本下拉框的对象   
		var sltversion1=document.form1.version1;   
		//得到对应产品的版本数组   
		var proversion0=produ[sltproduct0.selectedIndex - 1];   
		var proversion1=produ[sltproduct1.selectedIndex - 1];   
		//清空版本下拉框，仅留提示选项   
		sltversion0.length=1;  
		sltversion1.length=1;  
		//将产品数组中的值填充到版本下拉框中   
		for(var i=0;i<proversion0.length;i++){   
			sltversion0[i+1]=new Option(proversion0[i],proversion0[i]);
		} 
		for(var i=0;i<proversion1.length;i++){   
			sltversion1[i+1]=new Option(proversion1[i],proversion1[i]);
		}  
	}   
	function check(){
		var obj0 = document.getElementById('select0');
		text0=obj0.options[obj0.selectedIndex].text;
		
		
		
		//获取id为product0的 option text
		var product0 = document.getElementById('product0');
		protext0=product0.options[product0.selectedIndex].text;
		
		//获取id为product1的 option text
		var product1 = document.getElementById('product1');
		protext1=product1.options[product1.selectedIndex].text;
		
		//获取id为version0的 option text
		var version0 = document.getElementById('version0');
		vertext0=version0.options[version0.selectedIndex].text;
		
		//获取id为version1的 option text
		var version1 = document.getElementById('version1');
		vertext1=version1.options[version1.selectedIndex].text;
		
		//alert(obj1)
		if (protext0 == "Mi2s"){
			protext1 == "Mi2s";
		}else{
			alert("手机产品不一致，请勿对比");
			}
			
		}
	}    
</script>
{% endblock %}

{% block middle_right_section%}
<div class="power_3_col right_section">
	{% if error = True %}
	    <script type="text/javascript">
			alert("{{info}}");
			window.location.href='/currinfo/'
		</script> 
	{% else %}
		<p>{{product}}_{{latestversion}}的{{variety}}结果</p>
	{% endif %}
	<div id="chartdiv" style="width: 100%; height: 580px;"></div>
</div>
{% endblock %}
